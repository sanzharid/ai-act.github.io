<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EU AI Act Risk Assessment Tool</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        h1 {
            color: #2c3e50;
            font-size: 2.2rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #3498db;
            padding-bottom: 0.5rem;
        }
        h2 {
            color: #2c3e50;
            font-size: 1.8rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        h3 {
            color: #2c3e50;
            font-size: 1.4rem;
            margin-top: 1.5rem;
            margin-bottom: 0.8rem;
        }
        .section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background-color: #f8f9fa;
            border-radius: 8px;
            border-left: 5px solid #3498db;
        }
        .question {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background-color: #f0f7ff;
            border-radius: 8px;
        }
        .question-text {
            font-weight: 600;
            font-size: 1.1rem;
            color: #2c3e50;
            margin-bottom: 0.8rem;
        }
        .explanation {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-bottom: 0.8rem;
            padding: 0.5rem;
            background-color: #f5f5f5;
            border-radius: 4px;
        }
        button {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn-primary {
            background-color: #3498db;
            color: white;
        }
        .btn-primary:hover {
            background-color: #2980b9;
        }
        .btn-secondary {
            background-color: #ecf0f1;
            color: #2c3e50;
        }
        .btn-secondary:hover {
            background-color: #bdc3c7;
        }
        .hidden {
            display: none;
        }
        .option {
            display: flex;
            align-items: center;
            margin-bottom: 0.8rem;
            padding: 0.8rem;
            background-color: white;
            border-radius: 4px;
            border: 1px solid #ddd;
            transition: all 0.2s ease;
        }
        .option:hover {
            border-color: #3498db;
            background-color: #f0f7ff;
        }
        .option input {
            margin-right: 0.8rem;
        }
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            margin-left: 5px;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 300px;
            background-color: #2c3e50;
            color: white;
            text-align: left;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #2c3e50 transparent transparent transparent;
        }
        .result-category {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 1rem;
            padding: 0.8rem;
            border-radius: 6px;
        }
        .unacceptable {
            background-color: #e74c3c;
            color: white;
        }
        .high-risk {
            background-color: #f39c12;
            color: white;
        }
        .limited-risk {
            background-color: #3498db;
            color: white;
        }
        .minimal-risk {
            background-color: #2ecc71;
            color: white;
        }
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 0.8rem;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
            font-weight: 600;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .article-link {
            color: #3498db;
            text-decoration: underline;
            font-weight: 600;
        }
        .print-box {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        .print-box h4 {
            margin-top: 0;
            font-weight: 600;
            color: #2c3e50;
        }
        .print-box ul {
            margin-left: 1.5rem;
            margin-bottom: 0;
        }
        .print-box li {
            margin-bottom: 0.5rem;
        }
        
        /* Print styles */
        @media print {
            body {
                background-color: white;
            }
            .container {
                box-shadow: none;
                padding: 0;
            }
            .nav-buttons {
                display: none;
            }
            .print-box {
                display: none;
            }
            button {
                display: none;
            }
            .hidden {
                display: block;
            }
            .section {
                break-inside: avoid;
                page-break-inside: avoid;
            }
            a {
                color: #2c3e50;
                text-decoration: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>EU AI Act Risk Assessment Tool</h1>
        
        <!-- Introduction Section -->
        <div id="intro-section" class="section">
            <h2>Introduction</h2>
            <p>This tool is just a proof of concept and cannot be used in any official capacity. Author will bear no responsibility for any consequence of usage of this tool. This tool will help you determine how your AI system should be classified under the EU AI Act. The assessment will guide you through a series of questions to determine if your system falls into one of these categories:</p>
            <ul class="list-disc pl-5 mb-4">
                <li><strong>Unacceptable Risk</strong>: AI systems that are prohibited</li>
                <li><strong>High Risk</strong>: AI systems that require strict compliance with specific requirements</li>
                <li><strong>Limited/Transparency Risk</strong>: AI systems with transparency obligations</li>
                <li><strong>Minimal Risk/General Purpose AI</strong>: AI systems with minimal or no specific obligations</li>
            </ul>
            <p>Please enter information about your AI solution:</p>
            <div class="mb-4">
                <label for="ai-name" class="block font-medium mb-2">AI Solution Name:</label>
                <input type="text" id="ai-name" class="w-full p-2 border rounded" placeholder="Enter the name of your AI solution">
            </div>
            <div class="mb-4">
                <label for="ai-description" class="block font-medium mb-2">AI Solution Description:</label>
                <textarea id="ai-description" class="w-full p-2 border rounded" rows="4" placeholder="Describe the purpose and functionality of your AI solution"></textarea>
            </div>
            <button id="start-assessment" class="btn-primary">Start Assessment</button>
        </div>

        <!-- Section 1: Prohibited Practices -->
        <div id="section1" class="section hidden">
            <h2>Section 1: Prohibited Practices</h2>
            <p>First, let's determine if your AI system falls into any prohibited categories under <a href="https://artificialintelligenceact.eu/article/5/" target="_blank" class="article-link">Article 5</a> of the EU AI Act.</p>
            
            <div class="question">
                <div class="question-text">Does your AI system deploy subliminal techniques or use purposefully manipulative or deceptive techniques? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This refers to AI systems that may manipulate a person's behavior without their awareness or using deceptive methods that materially distort behavior.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q1-1" value="yes"> Yes - The system uses subliminal or manipulative techniques
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q1-1" value="no"> No - The system does not use such techniques
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Does your AI system exploit vulnerabilities of a specific group (due to age, disability, or social/economic situation)? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This refers to AI systems that target specific vulnerabilities of people based on their characteristics to influence their behavior.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q1-2" value="yes"> Yes - The system exploits such vulnerabilities
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q1-2" value="no"> No - The system does not exploit such vulnerabilities
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Does your AI system evaluate or classify natural persons based on social behavior or personal characteristics (social scoring)? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This refers to AI systems that assign "social scores" to people based on their behavior or characteristics, potentially leading to unfavorable treatment.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q1-3" value="yes"> Yes - The system performs social scoring
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q1-3" value="no"> No - The system does not perform social scoring
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Does your AI system use biometric identification in publicly accessible spaces for law enforcement purposes? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This refers to systems like facial recognition used in public places for law enforcement, which is generally prohibited with certain narrow exceptions.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q1-4" value="yes"> Yes - The system uses biometric identification in public spaces
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q1-4" value="no"> No - The system does not use biometric identification in public spaces
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Does your AI system create or expand facial recognition databases through untargeted scraping? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This refers to AI systems that collect facial images from the internet or CCTV footage without permission to build facial recognition databases.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q1-5" value="yes"> Yes - The system scrapes facial images without permission
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q1-5" value="no"> No - The system does not scrape facial images
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Does your AI system infer emotions in workplace or educational contexts? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This refers to AI systems that attempt to detect or infer emotions of people in workplaces or schools, which is prohibited except for medical or safety purposes.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q1-6" value="yes"> Yes - The system infers emotions in these contexts
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q1-6" value="no"> No - The system does not infer emotions in these contexts
                    </label>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn-secondary" onclick="showSection('intro-section')">Previous</button>
                <button class="btn-primary" onclick="checkSection1()">Next</button>
            </div>
        </div>

        <!-- Section 2: Biometric Systems -->
        <div id="section2" class="section hidden">
            <h2>Section 2: Biometric Systems</h2>
            <p>Let's check if your AI system involves biometric identification or categorization as defined in <a href="https://artificialintelligenceact.eu/annex/3/" target="_blank" class="article-link">Annex III</a> of the EU AI Act.</p>
            
            <div class="question">
                <div class="question-text">Does your AI system perform remote biometric identification? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This refers to systems that identify individuals at a distance using their biometric data (e.g., facial recognition systems).</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q2-1" value="yes"> Yes - The system performs remote biometric identification
                    </label>
                    <label class="option">
                        <input type="radio" name="q2-1" value="no"> No - The system does not perform remote biometric identification
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Does your AI system perform biometric categorization based on sensitive attributes? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This refers to systems that categorize people based on biometric data according to sensitive characteristics like race, gender, etc.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q2-2" value="yes"> Yes - The system performs biometric categorization
                    </label>
                    <label class="option">
                        <input type="radio" name="q2-2" value="no"> No - The system does not perform biometric categorization
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Does your AI system perform emotion recognition? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This refers to systems that attempt to identify or analyze a person's emotional state using biometric or other data.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q2-3" value="yes"> Yes - The system performs emotion recognition
                    </label>
                    <label class="option">
                        <input type="radio" name="q2-3" value="no"> No - The system does not perform emotion recognition
                    </label>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn-secondary" onclick="showSection('section1')">Previous</button>
                <button class="btn-primary" onclick="checkSection2()">Next</button>
            </div>
        </div>

        <!-- Section 3: Critical Infrastructure and Essential Services -->
        <div id="section3" class="section hidden">
            <h2>Section 3: Critical Infrastructure and Essential Services</h2>
            <p>Let's determine if your AI system is used in critical infrastructure or essential services as defined in <a href="https://artificialintelligenceact.eu/annex/3/" target="_blank" class="article-link">Annex III</a> of the EU AI Act.</p>
            
            <div class="question">
                <div class="question-text">Is your AI system used as a safety component in the management or operation of critical infrastructure? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This includes systems used in critical digital infrastructure, road traffic, or the supply of water, gas, heating, or electricity.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q3-1" value="yes"> Yes - The system is used in critical infrastructure
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q3-1" value="no"> No - The system is not used in critical infrastructure
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Is your AI system used to determine access to essential services? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This includes systems used to evaluate eligibility for essential public or private services like healthcare, education, or financial services.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q3-2" value="yes"> Yes - The system determines access to essential services
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q3-2" value="no"> No - The system does not determine access to essential services
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Is your AI system used to evaluate creditworthiness or establish credit scores? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This refers to systems that assess a person's credit risk or establish credit scores used by financial institutions.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q3-3" value="yes"> Yes - The system evaluates creditworthiness
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q3-3" value="no"> No - The system does not evaluate creditworthiness
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Is your AI system used for emergency services dispatch or priority decisions? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This refers to systems used to evaluate emergency calls or establish priority in dispatching emergency response services.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q3-4" value="yes"> Yes - The system is used for emergency services dispatch
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q3-4" value="no"> No - The system is not used for emergency services dispatch
                    </label>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn-secondary" onclick="showSection('section2')">Previous</button>
                <button class="btn-primary" onclick="checkSection3()">Next</button>
            </div>
        </div>

        <!-- Section 4: Education, Employment, and Law Enforcement -->
        <div id="section4" class="section hidden">
            <h2>Section 4: Education, Employment, and Law Enforcement</h2>
            <p>Let's check if your AI system is used in education, employment, or law enforcement contexts as defined in <a href="https://artificialintelligenceact.eu/annex/3/" target="_blank" class="article-link">Annex III</a> of the EU AI Act.</p>
            
            <div class="question">
                <div class="question-text">Is your AI system used in education or vocational training contexts? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This includes systems used for admissions, evaluating learning outcomes, or monitoring student behavior during tests.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q4-1" value="yes"> Yes - The system is used in education contexts
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q4-1" value="no"> No - The system is not used in education contexts
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Is your AI system used in employment, worker management, or recruitment? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This includes systems used for recruitment, worker evaluation, promotion decisions, or task allocation.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q4-2" value="yes"> Yes - The system is used in employment contexts
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q4-2" value="no"> No - The system is not used in employment contexts
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Is your AI system used by law enforcement authorities? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This includes systems used for risk assessment, evidence evaluation, crime prediction, or profiling in law enforcement contexts.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q4-3" value="yes"> Yes - The system is used by law enforcement
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q4-3" value="no"> No - The system is not used by law enforcement
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Is your AI system used in migration, asylum, or border control management? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This includes systems used to assess security risks, migration risks, or evaluate applications for asylum or residence permits.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q4-4" value="yes"> Yes - The system is used in migration or border control
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q4-4" value="no"> No - The system is not used in migration or border control
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Is your AI system used in the administration of justice or democratic processes? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This includes systems used to assist judicial authorities or influence election outcomes or voting behavior.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q4-5" value="yes"> Yes - The system is used in justice or democratic processes
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q4-5" value="no"> No - The system is not used in justice or democratic processes
                    </label>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn-secondary" onclick="showSection('section3')">Previous</button>
                <button class="btn-primary" onclick="checkSection4()">Next</button>
            </div>
        </div>

        <!-- Section 5: Transparency Requirements -->
        <div id="section5" class="section hidden">
            <h2>Section 5: Transparency Requirements</h2>
            <p>Let's check if your AI system has specific transparency requirements under <a href="https://artificialintelligenceact.eu/article/50/" target="_blank" class="article-link">Article 50</a> of the EU AI Act.</p>
            
            <div class="question">
                <div class="question-text">Does your AI system generate or manipulate text, image, audio, or video content? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This includes AI systems that create synthetic content like deepfakes, text generation, or other content that could be mistaken for authentic content.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q5-1" value="yes"> Yes - The system generates or manipulates content
                    </label>
                    <label class="option">
                        <input type="radio" name="q5-1" value="no"> No - The system does not generate or manipulate content
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Does your AI system interact with humans (like chatbots or virtual assistants)? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This refers to AI systems that engage in conversation or other interactions with humans, requiring transparency about their artificial nature.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q5-2" value="yes"> Yes - The system interacts with humans
                    </label>
                    <label class="option">
                        <input type="radio" name="q5-2" value="no"> No - The system does not interact with humans
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Does your AI system use emotion recognition or biometric categorization? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This refers to systems that analyze emotions or categorize people based on biometric data, requiring specific transparency measures.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q5-3" value="yes"> Yes - The system uses emotion recognition or biometric categorization
                    </label>
                    <label class="option">
                        <input type="radio" name="q5-3" value="no"> No - The system does not use these technologies
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">How would you best characterize your AI system's purpose and capabilities? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This helps determine if your system falls into the limited risk category based on its relationship to human activities.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q5-4" value="narrow"> The system performs narrow procedural tasks
                    </label>
                    <label class="option">
                        <input type="radio" name="q5-4" value="enhance"> The system enhances/supports human work without replacing decision-making
                    </label>
                    <label class="option">
                        <input type="radio" name="q5-4" value="general"> The system is a general-purpose AI with broad capabilities
                    </label>
                    <label class="option">
                        <input type="radio" name="q5-4" value="replace"> The system replaces human decision-making in certain contexts
                    </label>
                    <label class="option">
                        <input type="radio" name="q5-4" value="augment"> The system augments decision-making but humans maintain final control
                    </label>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn-secondary" onclick="showSection('section4')">Previous</button>
                <button class="btn-primary" onclick="checkSection5()">Next</button>
            </div>
        </div>

        <!-- Section 6: General Purpose AI -->
        <div id="section6" class="section hidden">
            <h2>Section 6: General Purpose AI</h2>
            <p>Finally, let's determine if your AI system qualifies as General Purpose AI under <a href="https://artificialintelligenceact.eu/article/3/" target="_blank" class="article-link">Article 3</a> of the EU AI Act.</p>
            
            <div class="question">
                <div class="question-text">Is your AI system capable of performing a wide range of distinct tasks? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">General Purpose AI systems can competently perform many different tasks, not just a specific function. Examples include large language models or multimodal AI systems.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q6-1" value="yes"> Yes - The system can perform many distinct tasks
                    </label>
                    <label class="option">
                        <input type="radio" name="q6-1" value="no"> No - The system is designed for specific tasks only
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">How is your AI system deployed or integrated with other systems? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">This helps determine if your system is a foundation model that can be integrated in various ways (characteristic of GPAI) or has a fixed implementation.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q6-2" value="api"> Via API or other programmatic interfaces
                    </label>
                    <label class="option">
                        <input type="radio" name="q6-2" value="manual"> Through manual integration (not via API)
                    </label>
                    <label class="option">
                        <input type="radio" name="q6-2" value="standalone"> As a standalone system with fixed functionality
                    </label>
                    <label class="option">
                        <input type="radio" name="q6-2" value="embedded"> Embedded within other software or hardware
                    </label>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Does your AI system pose only minimal risks to health, safety, fundamental rights, the environment, democracy, and the rule of law? <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltiptext">Minimal risk systems include AI-enabled spam filters, inventory management systems, AI used in games, etc. These systems don't significantly impact people's rights or safety.</span></span></div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q6-3" value="yes"> Yes - The system poses only minimal risks
                    </label>
                    <label class="option">
                        <input type="radio" name="q6-3" value="no"> No - The system may pose more significant risks
                    </label>
                    <label class="option">
                        <input type="radio" name="q6-3" value="uncertain"> Uncertain - Risk level depends on specific implementation
                    </label>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn-secondary" onclick="showSection('section5')">Previous</button>
                <button class="btn-primary" onclick="finalizeAssessment()">Complete Assessment</button>
            </div>
        </div>

        <!-- Results Section -->
        <div id="results-section" class="section hidden">
            <h2>Assessment Results</h2>
            <div id="ai-system-info" class="mb-6 p-4 bg-gray-100 rounded">
                <h3 class="mb-2">AI System Information</h3>
                <p><strong>Name:</strong> <span id="result-ai-name"></span></p>
                <p><strong>Description:</strong> <span id="result-ai-description"></span></p>
            </div>
            
            <div id="result-category" class="result-category"></div>
            <div id="result-explanation" class="mb-4"></div>
            
            <h3>Compliance Requirements</h3>
            <div id="compliance-requirements" class="mb-4"></div>
            
            <h3>Summary of Your Answers</h3>
            <div id="answers-summary" class="mb-4">
                <table id="answers-table">
                    <thead>
                        <tr>
                            <th>Question</th>
                            <th>Your Answer</th>
                            <th>Relevant Article</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Will be filled dynamically -->
                    </tbody>
                </table>
            </div>
            
            <div class="print-box">
                <h4>Save as PDF</h4>
                <p>You can also save this webpage to your device as a PDF by finding the 'Print' function in your web browser's tools menu.</p>
                <ul>
                    <li>Press CTRL + P (Windows) or CMD + P (Mac) to open the 'Print' menu.</li>
                    <li>Select destination: 'Save as PDF'.</li>
                    <li>Make sure 'Background graphics' (or similar) are enabled in the print settings.</li>
                    <li>Make sure the headers and footers are unchecked</li>
                    <li>Click the 'Save' button.</li>
                </ul>
            </div>
            
            <div class="mt-6">
                <button id="print-btn" class="btn-primary mb-2">Print Assessment</button>
                <button id="export-csv" class="btn-secondary">Export to CSV</button>
                <button id="restart-btn" class="btn-secondary ml-2">Start New Assessment</button>
            </div>
        </div>
    </div>

    <script>
        // Variables to track assessment state
        let currentSection = 'intro-section';
        let assessmentAnswers = {};
        let assessmentResult = "";
        let riskCategory = "";
        
        // Initialize when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('start-assessment').addEventListener('click', startAssessment);
            document.getElementById('print-btn').addEventListener('click', printAssessment);
            document.getElementById('export-csv').addEventListener('click', exportToCSV);
            document.getElementById('restart-btn').addEventListener('click', restartAssessment);
            
            // Initialize single-select radio buttons to ensure only one is selected
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    let name = this.name;
                    document.querySelectorAll(`input[name="${name}"]`).forEach(r => {
                        if (r !== this) r.checked = false;
                    });
                });
            });
        });
        
        // Show a specific section and hide others
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show the requested section
            document.getElementById(sectionId).classList.remove('hidden');
            currentSection = sectionId;
            
            // Scroll to top
            window.scrollTo(0, 0);
        }
        
        // Start the assessment
        function startAssessment() {
            // Get AI solution details
            let aiName = document.getElementById('ai-name').value;
            let aiDescription = document.getElementById('ai-description').value;
            
            // Store in assessment answers
            assessmentAnswers['ai-name'] = aiName;
            assessmentAnswers['ai-description'] = aiDescription;
            
            // Move to first section
            showSection('section1');
        }
        
        // Restart the assessment
        function restartAssessment() {
            // Clear form inputs
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.checked = false;
            });
            
            document.getElementById('ai-name').value = '';
            document.getElementById('ai-description').value = '';
            
            // Reset answers and result
            assessmentAnswers = {};
            assessmentResult = "";
            riskCategory = "";
            
            // Go back to intro
            showSection('intro-section');
        }
        
        // Section 1 validation and navigation
        function checkSection1() {
            // Store answers
            let q1_1 = getCheckboxValues('q1-1');
            let q1_2 = getCheckboxValues('q1-2');
            let q1_3 = getCheckboxValues('q1-3');
            let q1_4 = getCheckboxValues('q1-4');
            let q1_5 = getCheckboxValues('q1-5');
            let q1_6 = getCheckboxValues('q1-6');
            
            assessmentAnswers['q1-1'] = q1_1;
            assessmentAnswers['q1-2'] = q1_2;
            assessmentAnswers['q1-3'] = q1_3;
            assessmentAnswers['q1-4'] = q1_4;
            assessmentAnswers['q1-5'] = q1_5;
            assessmentAnswers['q1-6'] = q1_6;
            
            // Check for prohibited practices
            if (q1_1.includes('yes') || q1_2.includes('yes') || q1_3.includes('yes') || 
                q1_4.includes('yes') || q1_5.includes('yes') || q1_6.includes('yes')) {
                riskCategory = "unacceptable";
                assessmentResult = "Unacceptable Risk";
                finalizeAssessment();
                return;
            }
            
            // Move to next section
            showSection('section2');
        }
        
        // Section 2 validation and navigation
        function checkSection2() {
            // Store answers
            let q2_1 = getRadioValue('q2-1');
            let q2_2 = getRadioValue('q2-2');
            let q2_3 = getRadioValue('q2-3');
            
            assessmentAnswers['q2-1'] = q2_1;
            assessmentAnswers['q2-2'] = q2_2;
            assessmentAnswers['q2-3'] = q2_3;
            
            // Check for high-risk biometric systems
            if (q2_1 === 'yes' || q2_2 === 'yes' || q2_3 === 'yes') {
                riskCategory = "high";
                assessmentResult = "High Risk";
                finalizeAssessment();
                return;
            }
            
            // Move to next section
            showSection('section3');
        }
        
        // Section 3 validation and navigation
        function checkSection3() {
            // Store answers
            let q3_1 = getCheckboxValues('q3-1');
            let q3_2 = getCheckboxValues('q3-2');
            let q3_3 = getCheckboxValues('q3-3');
            let q3_4 = getCheckboxValues('q3-4');
            
            assessmentAnswers['q3-1'] = q3_1;
            assessmentAnswers['q3-2'] = q3_2;
            assessmentAnswers['q3-3'] = q3_3;
            assessmentAnswers['q3-4'] = q3_4;
            
            // Check for high-risk critical infrastructure systems
            if (q3_1.includes('yes') || q3_2.includes('yes') || q3_3.includes('yes') || q3_4.includes('yes')) {
                riskCategory = "high";
                assessmentResult = "High Risk";
                finalizeAssessment();
                return;
            }
            
            // Move to next section
            showSection('section4');
        }
        
        // Section 4 validation and navigation
        function checkSection4() {
            // Store answers
            let q4_1 = getCheckboxValues('q4-1');
            let q4_2 = getCheckboxValues('q4-2');
            let q4_3 = getCheckboxValues('q4-3');
            let q4_4 = getCheckboxValues('q4-4');
            let q4_5 = getCheckboxValues('q4-5');
            
            assessmentAnswers['q4-1'] = q4_1;
            assessmentAnswers['q4-2'] = q4_2;
            assessmentAnswers['q4-3'] = q4_3;
            assessmentAnswers['q4-4'] = q4_4;
            assessmentAnswers['q4-5'] = q4_5;
            
            // Check for high-risk education, employment, or law enforcement systems
            if (q4_1.includes('yes') || q4_2.includes('yes') || q4_3.includes('yes') || 
                q4_4.includes('yes') || q4_5.includes('yes')) {
                riskCategory = "high";
                assessmentResult = "High Risk";
                finalizeAssessment();
                return;
            }
            
            // Move to next section
            showSection('section5');
        }
        
        // Section 5 validation and navigation
        function checkSection5() {
            // Store answers
            let q5_1 = getRadioValue('q5-1');
            let q5_2 = getRadioValue('q5-2');
            let q5_3 = getRadioValue('q5-3');
            let q5_4 = getRadioValue('q5-4');
            
            assessmentAnswers['q5-1'] = q5_1;
            assessmentAnswers['q5-2'] = q5_2;
            assessmentAnswers['q5-3'] = q5_3;
            assessmentAnswers['q5-4'] = q5_4;
            
            // Check for limited risk transparency requirements
            if (q5_1 === 'yes' || q5_2 === 'yes' || q5_3 === 'yes') {
                riskCategory = "limited";
                assessmentResult = "Limited/Transparency Risk";
                finalizeAssessment();
                return;
            }
            
            // Move to next section
            showSection('section6');
        }
        
        // Finalize the assessment and show results
        function finalizeAssessment() {
            // If we haven't determined a risk category yet, process section 6
            if (riskCategory === "") {
                // Store section 6 answers if not already at results
                if (currentSection === 'section6') {
                    let q6_1 = getRadioValue('q6-1');
                    let q6_2 = getRadioValue('q6-2');
                    let q6_3 = getRadioValue('q6-3');
                    
                    assessmentAnswers['q6-1'] = q6_1;
                    assessmentAnswers['q6-2'] = q6_2;
                    assessmentAnswers['q6-3'] = q6_3;
                    
                    // Determine if it's GPAI
                    if (q6_1 === 'yes') {
                        riskCategory = "gpai";
                        assessmentResult = "General Purpose AI";
                    } else {
                        // If it's minimal risk
                        if (q6_3 === 'yes') {
                            riskCategory = "minimal";
                            assessmentResult = "Minimal Risk";
                        } else {
                            // Default to limited risk if uncertain
                            riskCategory = "limited";
                            assessmentResult = "Limited/Transparency Risk";
                        }
                    }
                }
            }
            
            // Display AI system information
            document.getElementById('result-ai-name').textContent = assessmentAnswers['ai-name'] || "Not specified";
            document.getElementById('result-ai-description').textContent = assessmentAnswers['ai-description'] || "Not specified";
            
            // Set result category display
            let resultCategoryElement = document.getElementById('result-category');
            resultCategoryElement.textContent = assessmentResult;
            resultCategoryElement.className = 'result-category';
            
            // Add appropriate styling based on risk
            if (riskCategory === 'unacceptable') {
                resultCategoryElement.classList.add('unacceptable');
            } else if (riskCategory === 'high') {
                resultCategoryElement.classList.add('high-risk');
            } else if (riskCategory === 'limited') {
                resultCategoryElement.classList.add('limited-risk');
            } else {
                resultCategoryElement.classList.add('minimal-risk');
            }
            
            // Set explanation and compliance requirements
            setResultExplanation();
            
            // Populate the answers summary table
            populateAnswersSummary();
            
            // Show results section
            showSection('results-section');
        }
        
        // Set detailed explanation and compliance requirements based on risk category
        function setResultExplanation() {
            let explanation = '';
            let compliance = '';
            
            if (riskCategory === 'unacceptable') {
                explanation = `<p>Your AI system appears to fall under the category of <strong>Unacceptable Risk</strong> as defined in <a href="https://artificialintelligenceact.eu/article/5/" target="_blank" class="article-link">Article 5</a> of the EU AI Act. Systems in this category are <strong>prohibited</strong> from being placed on the market, put into service, or used within the EU.</p>
                <p>This classification is based on your answers indicating that the system may engage in practices that are deemed to pose unacceptable risks to people's fundamental rights or safety.</p>`;
                
                compliance = `<p>Systems classified as Unacceptable Risk are <strong>prohibited</strong> under the EU AI Act. Based on your assessment, you should:</p>
                <ul class="list-disc pl-5 mb-4">
                    <li>Immediately stop development, deployment, or use of the system in its current form</li>
                    <li>Redesign the system to remove the prohibited functionalities</li>
                    <li>Conduct a new assessment to ensure compliance with the EU AI Act</li>
                    <li>Consult with legal experts specializing in AI regulation</li>
                </ul>`;
            } else if (riskCategory === 'high') {
                explanation = `<p>Your AI system appears to fall under the category of <strong>High Risk</strong> as defined in <a href="https://artificialintelligenceact.eu/article/6/" target="_blank" class="article-link">Article 6</a> and <a href="https://artificialintelligenceact.eu/annex/3/" target="_blank" class="article-link">Annex III</a> of the EU AI Act. This means your system may have significant impact on people's health, safety, or fundamental rights.</p>
                <p>This classification is based on your answers indicating that the system operates in sensitive domains or performs functions that require strict oversight.</p>`;
                
                compliance = `<p>High-Risk AI systems must comply with specific requirements under <a href="https://artificialintelligenceact.eu/article/8/" target="_blank" class="article-link">Article 8</a> through <a href="https://artificialintelligenceact.eu/article/15/" target="_blank" class="article-link">Article 15</a> of the EU AI Act, including:</p>
                <ul class="list-disc pl-5 mb-4">
                    <li>Implement a risk management system</li>
                    <li>Ensure data quality and governance</li>
                    <li>Provide technical documentation</li>
                    <li>Enable logging capabilities and human oversight</li>
                    <li>Ensure accuracy, robustness, and cybersecurity</li>
                    <li>Register in the EU database before market placement</li>
                    <li>Undergo conformity assessment</li>
                </ul>`;
            } else if (riskCategory === 'limited') {
                explanation = `<p>Your AI system appears to fall under the category of <strong>Limited Risk</strong> or <strong>Transparency Risk</strong> as specified in <a href="https://artificialintelligenceact.eu/article/50/" target="_blank" class="article-link">Article 50</a> of the EU AI Act. This means your system requires specific transparency measures, but not the full compliance requirements of high-risk systems.</p>
                <p>This classification is based on your answers indicating that users should be informed that they are interacting with an AI system, or that content is AI-generated.</p>`;
                
                compliance = `<p>Limited Risk AI systems must comply with specific transparency requirements under <a href="https://artificialintelligenceact.eu/article/50/" target="_blank" class="article-link">Article 50</a> of the EU AI Act, including:</p>
                <ul class="list-disc pl-5 mb-4">
                    <li>Disclose that content is generated by AI</li>
                    <li>Design the system to inform humans that they are interacting with an AI system</li>
                    <li>Label deep fakes and other synthetic content</li>
                    <li>Inform users when emotion recognition or biometric categorization is being used</li>
                </ul>`;
            } else if (riskCategory === 'gpai') {
                explanation = `<p>Your AI system appears to qualify as <strong>General Purpose AI (GPAI)</strong> as defined in <a href="https://artificialintelligenceact.eu/article/3/" target="_blank" class="article-link">Article 3</a> of the EU AI Act. This means your system is capable of performing a wide range of tasks and may serve as a foundation for various applications.</p>
                <p>This classification is based on your answers indicating that the system has broad capabilities and general-purpose functionality.</p>`;
                
                compliance = `<p>General Purpose AI models have specific obligations under the EU AI Act, including:</p>
                <ul class="list-disc pl-5 mb-4">
                    <li>Comply with transparency requirements</li>
                    <li>Document the training process</li>
                    <li>Establish copyright compliance policies</li>
                    <li>Assess and mitigate systemic risks for GPAI with systemic impact</li>
                    <li>Conduct model evaluations and testing</li>
                    <li>Ensure appropriate levels of cybersecurity</li>
                    <li>Report serious incidents</li>
                </ul>`;
            } else {
                explanation = `<p>Your AI system appears to fall under the category of <strong>Minimal Risk</strong> as per the EU AI Act. This means your system does not pose significant risks to health, safety, or fundamental rights.</p>
                <p>This classification is based on your answers indicating that the system has limited impact potential and does not fall into any of the higher risk categories.</p>`;
                
                compliance = `<p>Minimal Risk AI systems have no specific obligations under the EU AI Act. However, it is recommended to:</p>
                <ul class="list-disc pl-5 mb-4">
                    <li>Follow voluntary codes of conduct</li>
                    <li>Implement ethical AI principles</li>
                    <li>Maintain documentation of your system's functionality</li>
                    <li>Monitor for changes in your system's use that might move it to a higher risk category</li>
                </ul>`;
            }
            
            document.getElementById('result-explanation').innerHTML = explanation;
            document.getElementById('compliance-requirements').innerHTML = compliance;
        }
        
        // Populate the answers summary table
        function populateAnswersSummary() {
            const tableBody = document.querySelector('#answers-table tbody');
            tableBody.innerHTML = '';
            
            // Map of question IDs to descriptions and articles
            const questionMap = {
                'q1-1': {
                    description: 'Subliminal or manipulative techniques',
                    article: 'Article 5(1)(a)'
                },
                'q1-2': {
                    description: 'Exploitation of vulnerabilities',
                    article: 'Article 5(1)(b)'
                },
                'q1-3': {
                    description: 'Social scoring',
                    article: 'Article 5(1)(c)'
                },
                'q1-4': {
                    description: 'Biometric identification in public spaces',
                    article: 'Article 5(1)(d)'
                },
                'q1-5': {
                    description: 'Facial recognition database creation',
                    article: 'Article 5(1)(e)'
                },
                'q1-6': {
                    description: 'Emotion inference in workplace/education',
                    article: 'Article 5(1)(f)'
                },
                'q2-1': {
                    description: 'Remote biometric identification',
                    article: 'Annex III(1)(a)'
                },
                'q2-2': {
                    description: 'Biometric categorization',
                    article: 'Annex III(1)(b)'
                },
                'q2-3': {
                    description: 'Emotion recognition',
                    article: 'Annex III(1)(c)'
                },
                'q3-1': {
                    description: 'Critical infrastructure safety component',
                    article: 'Annex III(2)'
                },
                'q3-2': {
                    description: 'Essential services access determination',
                    article: 'Annex III(5)'
                },
                'q3-3': {
                    description: 'Credit evaluation',
                    article: 'Annex III(5)(b)'
                },
                'q3-4': {
                    description: 'Emergency services dispatch',
                    article: 'Annex III(5)(d)'
                },
                'q4-1': {
                    description: 'Education/vocational training',
                    article: 'Annex III(3)'
                },
                'q4-2': {
                    description: 'Employment/worker management',
                    article: 'Annex III(4)'
                },
                'q4-3': {
                    description: 'Law enforcement',
                    article: 'Annex III(6)'
                },
                'q4-4': {
                    description: 'Migration/asylum/border control',
                    article: 'Annex III(7)'
                },
                'q4-5': {
                    description: 'Justice administration/democratic processes',
                    article: 'Annex III(8)'
                },
                'q5-1': {
                    description: 'Content generation/manipulation (text, images, audio, video)',
                    article: 'Article 50(1)'
                },
                'q5-2': {
                    description: 'Human interaction',
                    article: 'Article 50(1)'
                },
                'q5-3': {
                    description: 'Emotion recognition/biometric categorization',
                    article: 'Article 50(1)'
                },
                'q5-4': {
                    description: 'System purpose and capabilities',
                    article: 'Article 50'
                },
                'q6-1': {
                    description: 'Wide range of tasks capability',
                    article: 'Article 3(44)'
                },
                'q6-2': {
                    description: 'Deployment/integration method',
                    article: 'Article 3(44)'
                },
                'q6-3': {
                    description: 'Risk level',
                    article: 'Article 3(44)'
                }
            };
            
            // Function to get answer display text
            function getAnswerText(questionId, value) {
                if (Array.isArray(value)) {
                    return value.join(', ');
                }
                
                if (questionId === 'q5-4') {
                    const purposeMap = {
                        'narrow': 'Performs narrow procedural tasks',
                        'enhance': 'Enhances/supports human work without replacing decision-making',
                        'general': 'General-purpose AI with broad capabilities',
                        'replace': 'Replaces human decision-making in certain contexts',
                        'augment': 'Augments decision-making but humans maintain control'
                    };
                    return purposeMap[value] || value;
                }
                
                if (questionId === 'q6-2') {
                    const deploymentMap = {
                        'api': 'Via API or programmatic interfaces',
                        'manual': 'Through manual integration',
                        'standalone': 'As a standalone system',
                        'embedded': 'Embedded within other software/hardware'
                    };
                    return deploymentMap[value] || value;
                }
                
                return value;
            }
            
            // Add all answers to table
            for (const [questionId, answer] of Object.entries(assessmentAnswers)) {
                // Skip the AI name and description
                if (questionId === 'ai-name' || questionId === 'ai-description') {
                    continue;
                }
                
                const questionInfo = questionMap[questionId] || {
                    description: questionId,
                    article: 'N/A'
                };
                
                const row = document.createElement('tr');
                
                const questionCell = document.createElement('td');
                questionCell.textContent = questionInfo.description;
                row.appendChild(questionCell);
                
                const answerCell = document.createElement('td');
                answerCell.textContent = getAnswerText(questionId, answer);
                row.appendChild(answerCell);
                
                const articleCell = document.createElement('td');
                const articleLink = document.createElement('a');
                articleLink.href = `https://artificialintelligenceact.eu/article/${questionInfo.article.split('(')[0].split(' ')[1]}/`;
                articleLink.target = '_blank';
                articleLink.className = 'article-link';
                articleLink.textContent = questionInfo.article;
                articleCell.appendChild(articleLink);
                row.appendChild(articleCell);
                
                tableBody.appendChild(row);
            }
            
            // Add the final assessment result
            const resultRow = document.createElement('tr');
            
            const resultQuestionCell = document.createElement('td');
            resultQuestionCell.textContent = 'Final Risk Classification';
            resultQuestionCell.style.fontWeight = 'bold';
            resultRow.appendChild(resultQuestionCell);
            
            const resultAnswerCell = document.createElement('td');
            resultAnswerCell.textContent = assessmentResult;
            resultAnswerCell.style.fontWeight = 'bold';
            resultRow.appendChild(resultAnswerCell);
            
            const resultArticleCell = document.createElement('td');
            let resultArticle = '';
            
            if (riskCategory === 'unacceptable') {
                resultArticle = 'Article 5';
            } else if (riskCategory === 'high') {
                resultArticle = 'Article 6 & Annex III';
            } else if (riskCategory === 'limited') {
                resultArticle = 'Article 50';
            } else if (riskCategory === 'gpai') {
                resultArticle = 'Article 3(44)';
            } else {
                resultArticle = 'N/A';
            }
            
            const resultArticleLink = document.createElement('a');
            resultArticleLink.href = `https://artificialintelligenceact.eu/article/${resultArticle.split(' ')[0].split('(')[0].split('&')[0].trim()}/`;
            resultArticleLink.target = '_blank';
            resultArticleLink.className = 'article-link';
            resultArticleLink.textContent = resultArticle;
            resultArticleCell.appendChild(resultArticleLink);
            resultRow.appendChild(resultArticleCell);
            
            tableBody.appendChild(resultRow);
        }
        
        // Helper function to get values of checked checkboxes
        function getCheckboxValues(name) {
            let values = [];
            document.querySelectorAll(`input[name="${name}"]:checked`).forEach(checkbox => {
                values.push(checkbox.value);
            });
            return values;
        }
        
        // Helper function to get value of selected radio
        function getRadioValue(name) {
            let radio = document.querySelector(`input[name="${name}"]:checked`);
            return radio ? radio.value : '';
        }
        
        // Print the assessment results
        function printAssessment() {
            window.print();
        }
        
        // Export answers to CSV
        function exportToCSV() {
            // Prepare CSV content
            let csvContent = 'Question,Answer,Article\n';
            
            // Map of question IDs to descriptions and articles
            const questionMap = {
                'ai-name': {
                    description: 'AI Solution Name',
                    article: 'N/A'
                },
                'ai-description': {
                    description: 'AI Solution Description',
                    article: 'N/A'
                },
                'q1-1': {
                    description: 'Subliminal or manipulative techniques',
                    article: 'Article 5(1)(a)'
                },
                'q1-2': {
                    description: 'Exploitation of vulnerabilities',
                    article: 'Article 5(1)(b)'
                },
                'q1-3': {
                    description: 'Social scoring',
                    article: 'Article 5(1)(c)'
                },
                'q1-4': {
                    description: 'Biometric identification in public spaces',
                    article: 'Article 5(1)(d)'
                },
                'q1-5': {
                    description: 'Facial recognition database creation',
                    article: 'Article 5(1)(e)'
                },
                'q1-6': {
                    description: 'Emotion inference in workplace/education',
                    article: 'Article 5(1)(f)'
                },
                'q2-1': {
                    description: 'Remote biometric identification',
                    article: 'Annex III(1)(a)'
                },
                'q2-2': {
                    description: 'Biometric categorization',
                    article: 'Annex III(1)(b)'
                },
                'q2-3': {
                    description: 'Emotion recognition',
                    article: 'Annex III(1)(c)'
                },
                'q3-1': {
                    description: 'Critical infrastructure safety component',
                    article: 'Annex III(2)'
                },
                'q3-2': {
                    description: 'Essential services access determination',
                    article: 'Annex III(5)'
                },
                'q3-3': {
                    description: 'Credit evaluation',
                    article: 'Annex III(5)(b)'
                },
                'q3-4': {
                    description: 'Emergency services dispatch',
                    article: 'Annex III(5)(d)'
                },
                'q4-1': {
                    description: 'Education/vocational training',
                    article: 'Annex III(3)'
                },
                'q4-2': {
                    description: 'Employment/worker management',
                    article: 'Annex III(4)'
                },
                'q4-3': {
                    description: 'Law enforcement',
                    article: 'Annex III(6)'
                },
                'q4-4': {
                    description: 'Migration/asylum/border control',
                    article: 'Annex III(7)'
                },
                'q4-5': {
                    description: 'Justice administration/democratic processes',
                    article: 'Annex III(8)'
                },
                'q5-1': {
                    description: 'Content generation/manipulation (text, images, audio, video)',
                    article: 'Article 50(1)'
                },
                'q5-2': {
                    description: 'Human interaction',
                    article: 'Article 50(1)'
                },
                'q5-3': {
                    description: 'Emotion recognition/biometric categorization',
                    article: 'Article 50(1)'
                },
                'q5-4': {
                    description: 'System purpose and capabilities',
                    article: 'Article 50'
                },
                'q6-1': {
                    description: 'Wide range of tasks capability',
                    article: 'Article 3(44)'
                },
                'q6-2': {
                    description: 'Deployment/integration method',
                    article: 'Article 3(44)'
                },
                'q6-3': {
                    description: 'Risk level',
                    article: 'Article 3(44)'
                }
            };
            
            // Add all answers to CSV
            for (const [questionId, answer] of Object.entries(assessmentAnswers)) {
                const questionInfo = questionMap[questionId] || {
                    description: questionId,
                    article: 'N/A'
                };
                
                // Format answer text
                let answerText = '';
                if (Array.isArray(answer)) {
                    answerText = answer.join(', ');
                } else if (questionId === 'q5-4') {
                    const purposeMap = {
                        'narrow': 'Performs narrow procedural tasks',
                        'enhance': 'Enhances/supports human work without replacing decision-making',
                        'general': 'General-purpose AI with broad capabilities',
                        'replace': 'Replaces human decision-making in certain contexts',
                        'augment': 'Augments decision-making but humans maintain control'
                    };
                    answerText = purposeMap[answer] || answer;
                } else if (questionId === 'q6-2') {
                    const deploymentMap = {
                        'api': 'Via API or programmatic interfaces',
                        'manual': 'Through manual integration',
                        'standalone': 'As a standalone system',
                        'embedded': 'Embedded within other software/hardware'
                    };
                    answerText = deploymentMap[answer] || answer;
                } else {
                    answerText = answer;
                }
                
                // Escape CSV special characters
                const escapedDescription = questionInfo.description.replace(/"/g, '""');
                const escapedAnswer = answerText.toString().replace(/"/g, '""');
                
                csvContent += `"${escapedDescription}","${escapedAnswer}","${questionInfo.article}"\n`;
            }
            
            // Add final result
            let resultArticle = '';
            if (riskCategory === 'unacceptable') {
                resultArticle = 'Article 5';
            } else if (riskCategory === 'high') {
                resultArticle = 'Article 6 & Annex III';
            } else if (riskCategory === 'limited') {
                resultArticle = 'Article 50';
            } else if (riskCategory === 'gpai') {
                resultArticle = 'Article 3(44)';
            } else {
                resultArticle = 'N/A';
            }
            
            csvContent += `"Final Risk Classification","${assessmentResult}","${resultArticle}"\n`;
            
            // Create download link
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            
            // Generate filename using AI name if available
            const aiName = assessmentAnswers['ai-name'] || 'AI-System';
            const safeAiName = aiName.replace(/[^a-z0-9]/gi, '_').toLowerCase();
            const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
            
            link.href = url;
            link.setAttribute('download', `${safeAiName}_eu-ai-act-assessment_${timestamp}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>
</body>
</html>
